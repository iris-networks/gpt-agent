#!/bin/bash

# Desktop shortcuts removal
echo "**** removing desktop shortcuts ****"

# Remove all desktop shortcuts
if [ -d "/config/Desktop" ]; then
    echo "**** removing all desktop shortcuts from /config/Desktop ****"
    rm -f /config/Desktop/*.desktop
    echo "**** desktop shortcuts removed successfully ****"
else
    echo "**** no desktop shortcuts found to remove ****"
fi

echo "**** desktop shortcuts removal completed ****"

# Set desktop background
echo "**** setting desktop background ****"
BACKGROUND_PATH="/usr/share/backgrounds/ubuntu-mate-photos/andrew-ridley-54228.jpg"

if [ -f "$BACKGROUND_PATH" ]; then
    echo "**** setting background to $BACKGROUND_PATH ****"
    
    # Set background using gsettings for MATE desktop
    sudo -u abc dbus-launch gsettings set org.mate.background picture-filename "$BACKGROUND_PATH" 2>/dev/null || true
    
    # Alternative method using gconftool-2 (fallback)
    sudo -u abc gconftool-2 --set /desktop/mate/background/picture_filename --type string "$BACKGROUND_PATH" 2>/dev/null || true
    
    echo "**** desktop background set successfully ****"
else
    echo "**** background file not found at $BACKGROUND_PATH ****"
fi

echo "**** desktop background configuration completed ****"