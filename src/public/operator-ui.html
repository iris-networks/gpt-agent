<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Iris Operator</title>
  <link rel="stylesheet" href="operator-ui.css">
</head>
<body>
  <div class="navbar">
    <div class="logo">
      <div class="logo-icon">U</div>
      <h1>Iris Operator Control Plane</h1>
    </div>
    <div class="vnc-status">
      <span id="operator-id">No operator active</span>
    </div>
  </div>

  <div class="container">
    <!-- Sidebar - Configuration and Controls -->
    <div class="sidebar">
      <div id="setup-panel">
        <h2>Configure Operator</h2>
        <div class="form-group">
          <label for="operator-type">Operator Type</label>
          <select id="operator-type" class="form-control">
            <option value="browser">Browser Automation</option>
            <option value="computer">Computer Automation</option>
          </select>
        </div>


        <div class="form-group">
          <label for="vlm-api-key">API Key</label>
          <input type="password" id="vlm-api-key" class="form-control" placeholder="Your API key" />
        </div>

        <h3>Advanced Settings</h3>
        <div class="form-group">
          <label for="max-loop-count">Max Loop Count</label>
          <input type="number" id="max-loop-count" class="form-control" value="10" min="1" max="100" />
        </div>

        <div class="form-group">
          <label for="loop-interval">Loop Interval (ms)</label>
          <input type="number" id="loop-interval" class="form-control" value="1000" min="500" max="5000" step="100" />
        </div>

        <div class="btn-group">
          <button id="init-operator" class="btn btn-primary">Initialize Operator</button>
        </div>
      </div>

      <div id="control-panel" class="hidden">
        <h2>Operator Controls</h2>
        <div class="status-info">
          <div>
            Status: <span id="operator-status" class="status-badge status-ready">READY</span>
          </div>
          <button id="take-screenshot" class="btn btn-secondary">Take Screenshot</button>
        </div>

        <div class="form-group">
          <label for="instructions">Instructions</label>
          <textarea id="instructions" class="form-control" placeholder="Enter instructions for the Iris Agent (e.g., 'Open Chrome and navigate to example.com')"></textarea>
        </div>

        <div class="btn-group">
          <button id="execute-instructions" class="btn btn-primary">Execute</button>
          <button id="cancel-execution" class="btn btn-secondary">Cancel</button>
          <button id="close-operator" class="btn btn-danger">Close Operator</button>
        </div>

        <div class="vnc-links">
          <p>VNC Access:
            <a href="http://localhost:6901/vnc.html" target="_blank">Web VNC Interface</a> or
            use VNC client at localhost:5901
          </p>
        </div>
      </div>
    </div>

    <!-- Main Content - Conversations and Screenshots -->
    <div class="main">
      <div class="card">
        <div class="tabs">
          <div class="tab active" data-tab="conversations">Conversations</div>
          <div class="tab" data-tab="screenshot">Screenshot</div>
        </div>

        <div id="conversations-tab" class="tab-content active">
          <div id="conversations-container">
            <div class="conversation">
              <div class="conversation-role">System</div>
              <div class="conversation-content">Initialize an operator to begin.</div>
            </div>
          </div>
        </div>

        <div id="screenshot-tab" class="tab-content">
          <div class="screenshot-container">
            <img id="screenshot" class="screenshot" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" alt="No screenshot available" style="display:none;">
            <p id="screenshot-message">No screenshot available. Initialize an operator and click "Take Screenshot".</p>
          </div>
        </div>
      </div>
      <!-- VNC Window Card -->
      <div class="card" style="flex:1; min-width:350px; min-height:500px; display:flex; flex-direction:column;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
          <h2 style="margin:0;">Iris Verse</h2>
          <button id="vnc-fullscreen-btn" class="btn btn-secondary" style="padding:6px 12px; font-size:14px;">Fullscreen</button>
        </div>
        <iframe 
          id="vnc-iframe"
          src="http://localhost:6901/vnc.html" 
          style="flex:1; border:1px solid #e2e8f0; border-radius:8px; min-height:400px;"
          allowfullscreen
        ></iframe>
      </div>
    </div>
  </div>

  <script src="operator-ui.js"></script>
</body>
</html>