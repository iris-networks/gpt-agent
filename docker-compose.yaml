services:
  cua:
    build: .
    container_name: cua
    ports:
      - "6901:6901"  # Your application port
      - "5901:5901"  # Webtop interface port
      - "8080:8080"  # Webserver port
    volumes:
      - ./.env.docker:/app/.env
    environment:
      - VNC_PW=password
      - VNC_RESOLUTION=1280x800
    security_opt:
      - seccomp=unconfined
    restart: unless-stopped

  bua:
    build:
      context: .
      dockerfile: bua.Dockerfile
    container_name: bua
    ports:
      - "3000:3000"  
      - "3001:3001"  
      - "8080:8080"
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=UTC
      - NODE_ENV=production
    volumes:
      - ./.env.docker:/app/.env
      - ./kasmvnc.yaml:/etc/kasmvnc/kasmvnc.yaml
    security_opt:
      - seccomp=unconfined
    restart: unless-stopped