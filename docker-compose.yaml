version: '3.8'

services:
  cua:
    build: .
    container_name: cua
    ports:
      - "3000:3000"  # Your application port
      - "3001:3001"  # Webtop interface port
      - "8080:8080"  # Webserver port
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=UTC
      - NODE_ENV=production
    volumes:
      - ./.env.docker:/app/.env
    restart: unless-stopped

  bua:
    build:
      context: .
      dockerfile: bua.Dockerfile
    container_name: bua
    ports:
      - "3010:3000"  # Your application port (remapped to avoid conflict)
      - "3011:3001"  # Webtop interface port (remapped to avoid conflict)
      - "8081:8080"  # Webserver port (remapped to avoid conflict)
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=UTC
      - NODE_ENV=production
    volumes:
      - ./.env.docker:/app/.env
      - ./kasmvnc.yaml:/etc/kasmvnc/kasmvnc.yaml
    restart: unless-stopped